#{extends 'main.html' /}
#{set title:'Livros - OnLibrary' /}

<div class="container">
	<br />
	<h1 style="text-align: center">Livros</h1>
	<br />
	
	<form action="@{Livros.listar}">
		<div class="input-group mb-3">
		  <input type="text" class="form-control" name="termo" placeholder="Pesquise aqui" aria-label="Recipient's username" aria-describedby="button-addon2">
		  <input class="btn btn-outline-secondary" value="Pesquisar" type="submit" id="button-addon2" />
		</div>
	</form>
	<br />
	
	<table class="table table-striped table-hover">
		<thead>
		 	<tr>
	      		<th>Nome</th>
	      		<th>Autor</th>
	      		<th>Categoria</th>
	      		<th>Ações</th>
	      	</tr>
		</thead>
		<tbody>
			#{list items: livros, as: 'livro'}
			<tr>
	      		<td>${livro.nome}</td>
	      		<td>${livro.autor}</td>
	      		<td>${livro.categoria}</td>
	      		<td>
	      			<a href="@{Livros.detalhar(livro.id)}" class="btn btn-secondary">Detalhar</a>
	      			#{if session.get('tipo') == session.get('adm')}
		      			<a href="@{Livros.editar(livro.id)}" class="btn btn-secondary">Editar</a>
		      			<a href="@{Livros.remover(livro.id)}" class="btn btn-danger">Remover</a>
	      			#{/if}
	      		</td>
	      	</tr>
	      	#{/list}
		</tbody>
	</table>
	#{if session.get('tipo') == session.get('adm')}
		<div class="d-grid gap-2">
			<a href="@{Livros.cadastrar}" class="btn btn-secondary">Adiconar Novo Livro no Sistema</a>
		</div>
	#{/if}
</div>