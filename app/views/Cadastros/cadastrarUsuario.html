#{extends 'main.html' /}
#{set title:'Cadastro - OnLibrary' /}

<div class="cadastro">
	#{if !session.get('usuario')}
		<br />
		<h1>Cadastro</h1>
		<br />
		<form action="@{Cadastros.salvarUsuario}" method="post" enctype="multipart/form-data">
			<input type="hidden" name="usuario.id" value="${usuario?.id}" /> 
			
			<span class="erros">#{error 'usuario.email' /}</span>
			<input type="email" name="usuario.email" placeholder="E-mail"
				value="${usuario?.email}" class="form-control" /> <br />
			 
			<span class="erros">#{error 'usuario.senha' /}</span>
			<input type="password" name="usuario.senha" placeholder="Senha"
				value="${usuario?.senha}" class="form-control" /> <br />
			 
			<span class="erros">#{error 'usuario.nome' /}</span>
			<input type="text" name="usuario.nome" placeholder="Nome"
				value="${usuario?.nome}" class="form-control" /> <br />
			
			<input type="file" name="usuario.fotoPerfil" value="${usuario?.fotoPerfil}"
				accept=".jpg, .png, .jfif" class="form-control" /> <br />

			<span class="d-grid gap-2">
				<input type="submit" value="Salvar" class="btn btn-primary" /> <br /> <br />
			</span>
		</form>
	#{/if}
	
	#{if session.get('usuario')}
		<br />
		<h1>Edição</h1>
		<br />
		<form action="@{Usuarios.salvarEdicao}" method="post" enctype="multipart/form-data">
			<input type="hidden" name="usuario.id" value="${usuario?.id}" /> 
			
			<input type="email" name="usuario.email" placeholder="E-mail"
				value="${usuario?.email}" class="form-control" /> <br />
			<span class="validation-error">#{error 'usuario.emial' /}</span> 
			
			<input type="password" name="usuario.senha" placeholder="Senha"
				value="${usuario?.senha}" class="form-control" /> <br />
			<span class="validation-error">#{error 'usuario.senha' /}</span> 
			
			<input type="text" name="usuario.nome" placeholder="Nome"
				value="${usuario?.nome}" class="form-control" /> <br />
			<span class="validation-error">#{error 'usuario.nome' /}</span>
			
			<input type="file" name="usuario.fotoPerfil" value="${usuario?.fotoPerfil}"
				accept=".jpg, .png, .jfif" class="form-control" /> <br />
			
			<span class="d-grid gap-2">
				<input type="submit" value="Editar" class="btn btn-primary" /> <br /> <br />
			</span>
		</form>
	 #{/if}
</div>